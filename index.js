let db = [
    {time:"05/31/2022",data:"39725231129400394061125266074672450166198538233517762750847836399099922983313450215244181025963649396603841"},
    {time:"05/30/2022",data:"12512629356468641116680969884032140560923031208501491015546967331080776006460166324181036659176876404942264"},
    {time:"05/29/2022",data:"87354280423747922643394978559919492744119579858465641127611501714969418163633833094247119825230764838333105"},
    {time:"05/28/2022",data:"57318863135229277476756882512057019906576782368014890797734469836925179153100734309241836271964029263533959"},
    {time:"05/27/2022",data:"29667671128977542471592592953315141571092990726346380018206576397193788504315222315413732265727866513845492"},
    {time:"05/26/2022",data:"41717955855809391750877408144696330956504188398877342723166061255949213419182025930493719329645473557136347"},
    {time:"05/25/2022",data:"87109075450359926377414434107550856951392532461248712337384897496920792013476482141747749134880405977660159"},
    {time:"05/23/2022",data:"97218587588771905801313193225569356870263710122493285774777015358427389768671538370376528578561959430874149"},
    {time:"05/22/2022",data:"24547491588825339604774489235199577488725863109422931155831959109958416574221150290915621957189520357560147"},
    {time:"05/21/2022",data:"85198208300836424874095000083714233788312830986212333019996180152742383344758963278058479155919304753641380"},
    {time:"05/20/2022",data:"78195299249314831878903739814870425681748750945128157982361126090682993776391223388819917721844657422236058"},
    {time:"05/19/2022",data:"49968899769823601110644665549225276766072002386611465304041264377648143489954594818206728604598685404712550"},
    {time:"05/18/2022",data:"69049923643807438286339573847851395006175786035530465080570190977599720632665306997726094341376655028570277"},
    {time:"05/17/2022",data:"58553764964569857221599766994814446442159286639702973209065734599548585190061129606460956884963254156190248"},
    {time:"05/16/2022",data:"17713950772684585992680378676732549597467706423960272193109589664480568489831120578711905155356867887383488"},
    {time:"05/15/2022",data:"93649137165964255194926636366500952870089322996476311363054666162535544132442543910543921228467398510945649"},
    {time:"05/14/2022",data:"30775083686963267521755719453383453769963108718091900586090221411807311769327030885179884758553635705740852"},
    {time:"05/13/2022",data:"29436463183229477466932126293341364379521790212456315931877174533860560791284325667526378796982775551498208"},
    {time:"05/12/2022",data:"55065850443495654359611901839005295627982990341839595862264290131353758444714653781853050119202543531333951"},
    {time:"05/11/2022",data:"27724109167949389431168154253674280386950589021638510889132738118705252106135185713536312150437419237150124"},
    {time:"05/10/2022",data:"35106029634527206423555889848628204415739319625429020306778066162054044607917185793205081784886090990375305"},
    {time:"05/09/2022",data:"05659619568892881464349133042822065775132209398047704231780371461441941200596219168201067725924274848280886"},
    {time:"05/08/2022",data:"51139233953655238651049914715729360445448710711543067410482885700871991746031867142671345547489963992701623"},
    {time:"05/07/2022",data:"73301108797906173405937163078885195110567192908331642293303650082988268413991320030814321677344745620246030"},
    {time:"05/06/2022",data:"20116519697459981169533358283557213760478899703873404337151658556980205884136160110682105459976482034103103"},
    {time:"05/05/2022",data:"78054562438086398662423728971820372437570001488127704258989000772725399902204320710039141312678849906104512"},
    {time:"05/04/2022",data:"79110211294652468497650923241395535845832247947546500117727711018912543682905107523294401136728971279250485"},
    {time:"05/03/2022",data:"48243954794727194238373346957266415391283264413370719136561839284113801610445766721409910872192838499559697"},
    {time:"05/02/2022",data:"94479285883161035225322339451694839172808891118029863852444887204404385348018135180806153445895861557959109"},
    {time:"05/01/2022",data:"81691242909085472236302178091309886889421044257804044848132448907676716782427767600867927401801186811013882"},

]


let setting_cau_status = 0;

$(document).ready(function(){
    $(".setting_cau").on("click",function(){
        let x = Number($(this).html());
        if(setting_cau_status == 0){
            setting_cau_status +=1;
            $("#cau_1").html(x);
            $("#cau_2").html("...");
        }else if(setting_cau_status == 1){
            setting_cau_status -=1;
            $("#cau_2").html(x);
        }
    })
})

function return_lo(data){
    let y = [];
    for(let i=0; i<50;i+=5){
        y.push(data[i+3]+data[i+4]);
    }
    for(let i=50; i<90;i+=4){
        y.push(data[i+2]+data[i+3]);
    }
    for(let i=90; i<99;i+=3){
        y.push(data[i+1]+data[i+2]);
    }
    for(let i=99; i<107;i+=2){
        y.push(data[i]+data[i+1]);
    }
    return y;
}

function ktra_lo(x,data){
    let arr = return_lo(data);
    let count = 0;
    for(let i=0; i<arr.length; i++){
        if(arr[i] == x){
            count ++;
        }
    }
    return count;
}
function luu_cau(){
    let cau_1 = Number($("#cau_1").html())-1;
    let cau_2 = Number($("#cau_2").html())-1;
    let DATA = "";
    let DB = [];
    let c1; let c2;
    for(let i=db.length-1; i>=0; i--){
        DB.push(db[i]);
    }
    console.log(DB)
    let x ='<table class="table table-bordered text-center"><thead><tr><td>Chủ nhật</td><td>Thứ 2</td><td>Thứ 3</td>'
            +'<td>Thứ 4</td>'
            +'<td>Thứ 5</td>'
            +'<td>Thứ 6</td>'
            +'<td>Thứ 7</td>'
        +'</tr></thead><tbody>'
    for(let i=0; i<DB.length;i++){
        let datetime = new Date(DB[i].time);
        let thu = datetime.getDay();
        // console.log(thu);
        if(i==0){
            x+= '<tr>';
            for(let j=0;j<thu;j++){
                x+= '<td style="background-color: white; height: 80px;"></td>'
            }
            x+='<td style="background-color: white; height: 80px;">'+DB[i].time+'</td>'
        }else if(i != DB.length-1 && thu == 0 ){
            DATA = DB[i-1].data;
            c1 = ktra_lo(DATA[cau_1]+DATA[cau_2],DB[i].data);
            c2 = ktra_lo(DATA[cau_2]+DATA[cau_1],DB[i].data);
            x+='<tr>';
            if(c1+c2 == 0){
                x+= '<td style="background-color: white; height: 80px;">'+DB[i].time+'</td>'
            }else{
                x+= '<td style="background-color: red; height: 80px;">'+DB[i].time+'<br> Xuôi: '+c1+"<br> Lộn: "+c2+'</td>'
            }
        }else if(i != DB.length-1 && thu == 6 ){
            DATA = DB[i-1].data;
            c1 = ktra_lo(DATA[cau_1]+DATA[cau_2],DB[i].data);
            c2 = ktra_lo(DATA[cau_2]+DATA[cau_1],DB[i].data);
            if(c1+c2 == 0){
                x+= '<td style="background-color: white; height: 80px;">'+DB[i].time+'</td>'
            }else{
                x+= '<td style="background-color: red; height: 80px;">'+DB[i].time+'<br> Xuôi: '+c1+"<br> Lộn: "+c2+'</td>'
            }
            x+='</tr>';
        }else if(i == DB.length-1){
            DATA = DB[i-1].data;
            c1 = ktra_lo(DATA[cau_1]+DATA[cau_2],DB[i].data);
            c2 = ktra_lo(DATA[cau_2]+DATA[cau_1],DB[i].data);
            if(c1+c2 == 0){
                x+= '<td style="background-color: white; height: 80px;">'+DB[i].time+'</td>'
            }else{
                x+= '<td style="background-color: red; height: 80px;">'+DB[i].time+'<br> Xuôi: '+c1+"<br> Lộn: "+c2+'</td>'
            }
            console.log(thu)
            for(let j=thu;j<6;j++){
                x+= '<td style="background-color: white; height: 80px;"></td>'
                
            }
            x+='</tr>';
        }else{
            DATA = DB[i-1].data;
            c1 = ktra_lo(DATA[cau_1]+DATA[cau_2],DB[i].data);
            c2 = ktra_lo(DATA[cau_2]+DATA[cau_1],DB[i].data);
            if(c1+c2 == 0){
                x+= '<td style="background-color: white; height: 80px;">'+DB[i].time+'</td>'
            }else{
                x+= '<td style="background-color: red; height: 80px;">'+DB[i].time+'<br> Xuôi: '+c1+"<br> Lộn: "+c2+'</td>'
            }
        }
    }
    x += '</tbody></table>';
    $("#kq_soi").empty();
    $("#kq_soi").append(x);

}
